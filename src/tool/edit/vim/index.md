---
outline: deep
---

# vim

`Vim`是一个强大的文本编辑器，具有丰富的功能，支持多种编程语言和文件格式。Vim 具有强大的文本处理能力，可以进行文本的查看、编辑、搜索和替换等操作。同时，Vim 具有高度的可定制性，可以通过修改配置文件或编写脚本来扩展其功能。

::: details vim 的主要功能

- 文本编辑：支持文本的查看、编辑、删除、复制和粘贴等操作。
- 文本搜索和替换：支持使用正则表达式进行文本搜索和替换。
- 文本格式化：支持自动格式化、自动缩进和代码补全等功能。
- 文本查看：支持多行文本查看、分屏查看和全屏查看等功能。
- 文本管理：支持文件管理、目录浏览和文件查找等功能。
- 扩展功能：可以通过插件或脚本来扩展 Vim 的功能，如语法高亮、自动补全等。
  :::
  ::: tip vim 的四种模式

- `普通模式`(Normal)：这是 Vim 的默认模式，用户可以通过输入命令来执行各种操作，如移动光标、删除文本等。
- `插入模式`(Insert)：用户可以在插入模式下输入文本，按下 `a` 键可以进入插入模式。
- `可视模式`(Visual)：用户可以在可视模式下选择文本，按下 `v` 键可以进入可视模式。
- `命令行模式`(Command-Line)：用户可以在命令行模式下输入命令，按下 `:` 键可以进入命令行模式。
  :::
  Vim 具有广泛的应用，特别是在 Linux 和 Unix 系统中，Vim 是默认的文本编辑器。Vim 的命令行模式使得其可以在没有图形界面的环境下进行文本编辑操作，提高了工作效率。

## 基础使用

### 普通模式

| 按键       | 功能                       | 按键       | 功能                       |
| ---------- | -------------------------- | ---------- | -------------------------- |
| `h`        | 光标左移                   | `j`        | 光标下移                   |
| `k`        | 光标上移                   | `l`        | 光标右移                   |
| `w`        | 光标移动到下一个单词的开头 | `b`        | 光标移动到上一个单词的开头 |
| `e`        | 光标移动到当前单词的末尾   | `ge`       | 光标移动到上一个单词的末尾 |
| `0`        | 光标移动到行首             | `$`        | 光标移动到行尾             |
| `gg`       | 光标移动到文件开头         | `G`        | 光标移动到文件末尾         |
| `Ctrl + f` | 向上翻页                   | `Ctrl + b` | 向下翻页                   |
| `Ctrl + d` | 向下翻半页                 | `Ctrl + u` | 向上翻半页                 |
| `Ctrl + e` | 向下滚动一行               | `Ctrl + y` | 向上滚动一行               |

### 插入模式

Normal 模式下可以通过以下命令进入 Insert 模式
| 按键 | 功能 |
| ---------- | -------------------------- |
| `i` | 在光标前插入 |
| `I` | 在行首插入 |
| `a` | 在光标后插入 |
| `A` | 在行尾插入 |
| `o` | 在光标下方插入新行 |
| `O` | 在光标上方插入新行 |
| `s` | 删除光标下的字符并进入插入模式 |
| `S` | 删除整行并进入插入模式 |

### 可视模式

在 Nomal 模式下，按 `v` 进入可视模式，可以选中文本，然后进行复制、粘贴、删除等操作。

- 在 `Nomal 模式`下，按`v`进入可视模式，然后按`j`向下选择文本，按`k`向上选择文本，按`l`向右选择文本，按`h`向左选择文本。
- 在`可视模式`下，按`y`复制选中的文本，按`d`删除选中的文本，按`p`粘贴选中的文本。
- 在`可视模式`下，按`u`撤销上一步操作，按`Ctrl + r`重做上一步操作。
- 在`可视模式`下，按`$`选择到行尾，按`0`选择到行首，按`gg`选择到文件开头，按`G`选择到文件末尾。

### 命令行模式

Nomoal 模式下输入 `:` 进入命令行模式，可以执行各种命令，例如保存文件、退出 Vim 等。
| 命令 | 功能 |
| ---------- | -------------------------- |
| `:w` | 保存文件 |
| `:q` | 退出 Vim |
| `:wq` | 保存文件并退出 Vim |
| `:q!` | 不保存文件退出 Vim |
| `:wq!` | 强制保存文件并退出 Vim |
| `:e` | 打开文件 |
| `:ls` | 列出所有打开的文件 |
| `:b` | 切换到指定编号的缓冲区 |
| `:help` | 查看帮助文档 |

## 移动与编辑

### 基于单词的移动

简单的`hjkl`键无法满足复杂的业务需求，因此 Vim 提供了基于单词的移动方式。
| 按键 | 功能 |
| ---------- | -------------------------- |
| `w` | 向前移动一个单词 |
| `b` | 向后移动一个单词 |
| `e` | 移动到当前单词的末尾 |
| `ge` | 移动到当前单词的开头 |
| `W` | 向前移动一个以空格分隔的单词 |
| `B` | 向后移动一个以空格分隔的单词 |
| `E` | 移动到当前以空格分隔的单词的末尾 |

:::warning

`web`大写版`WEB`对应的单词是连续的非空字符

![web与WEB的区别](/tool/edit/vim/tool-warn-base.png)

:::

### 基于搜索的移动

#### 行内搜索

| 按键      | 功能                             |
| --------- | -------------------------------- |
| `f{char}` | 跳转到本行下一个`char`字符出现处 |
| `F{char}` | 跳转到本行上一个`char`字符出现处 |
| `t{char}` | 跳转到本行下一个`char`字符之前   |
| `T{char}` | 跳转到本行上一个`char`字符之后   |
| `;`       | 重复上一次的 f、F、t、T 命令     |
| `,`       | 反向重复上一次的 f、F、t、T 命令 |

#### 文件中搜索

| 按键       | 功能                                                 |
| ---------- | ---------------------------------------------------- |
| `/pattern` | 在文件中搜索`pattern`字符串，并跳转到第一个匹配项    |
| `?pattern` | 在文件中搜索`pattern`字符串，并跳转到最后一个匹配项  |
| `n`        | 跳转到下一个匹配项                                   |
| `N`        | 跳转到上一个匹配项                                   |
| `*`        | 在文件中搜索当前光标下的单词，并跳转到第一个匹配项   |
| `#`        | 在文件中搜索当前光标下的单词，并跳转到最后一个匹配项 |

### 基于标记的移动

当需要临时离开当前光标处，可以设置一个标记，然后返回到该标记处。
| 按键 | 功能 |
| ---- | ---- |
| `m{a-z}` | 在当前光标处设置一个标记 |
| `{a-z}` | 跳转到标记处 |

#### 内置标记

| 按键 | 功能                     |
| ---- | ------------------------ |
| `''` | 跳转到上次修改的位置     |
| `"`  | 跳转到上次离开的位置     |
| `[`  | 跳转到上次修改的开始位置 |
| `]`  | 跳转到上次修改的结束位置 |
| `{`  | 跳转到上次修改的开始位置 |
| `}`  | 跳转到上次修改的结束位置 |

### 复合操作

"操作符+移动"是非常长见的操作逻辑，它允许你组合出更多动作
常见的操作符：

- `c`: 代表"chagne" ,修改，删除内容并进入插入模式
- `d`: 代表"delete",删除
- `y`: 代表"yank",复制

  例如：
  | 按键 | 功能 |
  | ---- | ---- |
  | `d$` | 删除当前光标到行尾的内容 |
  | `c$` | 删除当前光标到行尾的内容并进入插入模式 |
  | `y$` | 复制当前光标到行尾的内容 |
  | `dgg` | 删除当前光标到文件开头的内容 |
  | `dG` | 删除当前光标到文件结尾的内容 |

### 其他跳转

| 按键 | 功能                           |
| ---- | ------------------------------ |
| `^`  | 跳转到当前行的第一个非空白字符 |
| `$`  | 跳转到当前行的最后一个字符     |
| `H`  | 跳转到当前屏幕的顶部           |
| `M`  | 跳转到当前屏幕的中间           |
| `L`  | 跳转到当前屏幕的底部           |
| `%`  | 跳转到匹配的括号               |

### 重复操作

| 按键       | 功能                 |
| ---------- | -------------------- |
| `.`        | 重复上一次操作       |
| `u`        | 撤销上一次操作       |
| `Ctrl + r` | 重做上一次撤销的操作 |
| `U`        | 撤销当前行的所有操作 |

::: warning

- `.`命令非常适用于需要多次重复某一个修改动作的场景
- `u`命令用于撤销上一次操作，而`U`命令用于撤销当前行的所有操作
  :::

### 批量操作

> {count}+{action}:重复+次数 其中`action`可以是`d`、`c`、`y`等

| 按键  | 功能                                              |
| ----- | ------------------------------------------------- |
| `2d`  | 删除两行                                          |
| `3c$` | 删除当前光标到行尾的内容并进入插入模式，重复 3 次 |
| `5yy` | 复制当前行及其下 5 行                             |

## 文本对象操作
